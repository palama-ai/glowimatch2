import{r,j as e,B as N,a as t}from"./index-_ibJpO5e.js";import{A as S}from"./AdminLayout-DEpWlMYQ.js";const k="https://backend-three-sigma-81.vercel.app/api",A=()=>{const[a,v]=r.useState([]),[o,f]=r.useState(!0),[c,i]=r.useState(null),[d,y]=r.useState(""),[m,w]=r.useState("all"),x=async()=>{f(!0),i(null);try{const s=localStorage.getItem("gm_auth"),g=s?{Authorization:`Bearer ${JSON.parse(s).token}`}:{},l=await fetch(`${k}/admin/products`,{headers:g});if(l.ok){const n=await l.json();v(n.data||[])}else i("Failed to load products")}catch(s){console.error("Failed to fetch products:",s),i((s==null?void 0:s.message)||"Failed to load products")}finally{f(!1)}};r.useEffect(()=>{x()},[]);const C=["all",...new Set(a.map(s=>s.category).filter(Boolean))],u=a.filter(s=>{var n,b,p;const g=!d||((n=s.name)==null?void 0:n.toLowerCase().includes(d.toLowerCase()))||((b=s.brand)==null?void 0:b.toLowerCase().includes(d.toLowerCase()))||((p=s.seller_email)==null?void 0:p.toLowerCase().includes(d.toLowerCase())),l=m==="all"||s.category===m;return g&&l}),h=a.length,j=a.filter(s=>s.published).length,P=h-j;return e.jsxs(S,{children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Products"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"View all products in the database"})]}),e.jsx("div",{className:"flex gap-2 mt-4 md:mt-0",children:e.jsx(N,{variant:"outline",iconName:"RefreshCw",iconPosition:"left",onClick:x,children:"Refresh"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[e.jsx("div",{className:"bg-gradient-to-br from-card to-card/50 border border-border rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Total Products"}),e.jsx("div",{className:"text-4xl font-bold text-foreground mt-2",children:h})]}),e.jsx("div",{className:"p-3 rounded-lg bg-blue-500/10",children:e.jsx(t,{name:"Package",size:24,className:"text-blue-500"})})]})}),e.jsx("div",{className:"bg-gradient-to-br from-card to-card/50 border border-border rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Published"}),e.jsx("div",{className:"text-4xl font-bold text-green-600 mt-2",children:j})]}),e.jsx("div",{className:"p-3 rounded-lg bg-green-500/10",children:e.jsx(t,{name:"CheckCircle",size:24,className:"text-green-500"})})]})}),e.jsx("div",{className:"bg-gradient-to-br from-card to-card/50 border border-border rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Drafts"}),e.jsx("div",{className:"text-4xl font-bold text-amber-600 mt-2",children:P})]}),e.jsx("div",{className:"p-3 rounded-lg bg-amber-500/10",children:e.jsx(t,{name:"FileEdit",size:24,className:"text-amber-500"})})]})})]}),e.jsx("div",{className:"bg-card border border-border rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(t,{name:"Search",size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground"}),e.jsx("input",{type:"text",placeholder:"Search products by name, brand, or seller...",value:d,onChange:s=>y(s.target.value),className:"w-full pl-10 pr-4 py-2 bg-background border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-accent/50"})]})}),e.jsx("select",{value:m,onChange:s=>w(s.target.value),className:"px-4 py-2 bg-background border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-accent/50",children:C.map(s=>e.jsx("option",{value:s,children:s==="all"?"All Categories":s.charAt(0).toUpperCase()+s.slice(1)},s))})]})}),o&&e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(t,{name:"Loader2",className:"animate-spin text-accent mr-2"}),e.jsx("span",{className:"text-muted-foreground",children:"Loading products..."})]}),c&&!o&&e.jsxs("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(t,{name:"AlertTriangle",className:"text-destructive"}),e.jsx("span",{className:"text-destructive",children:c})]}),e.jsx(N,{size:"sm",variant:"ghost",onClick:x,children:"Retry"})]}),!o&&!c&&e.jsxs("div",{className:"bg-card border border-border rounded-lg overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted/50 border-b border-border",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-muted-foreground",children:"Product"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-muted-foreground",children:"Category"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-muted-foreground",children:"Price"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-muted-foreground",children:"Seller"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-muted-foreground",children:"Views"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-muted-foreground",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-border",children:u.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:6,className:"px-4 py-12 text-center text-muted-foreground",children:[e.jsx(t,{name:"Package",size:32,className:"mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No products found"})]})}):u.map(s=>e.jsxs("tr",{className:"hover:bg-muted/30 transition-colors",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[s.image_url?e.jsx("img",{src:s.image_url,alt:s.name,className:"w-10 h-10 rounded-lg object-cover border border-border"}):e.jsx("div",{className:"w-10 h-10 rounded-lg bg-muted flex items-center justify-center",children:e.jsx(t,{name:"Image",size:16,className:"text-muted-foreground"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-foreground",children:s.name}),s.brand&&e.jsx("div",{className:"text-xs text-muted-foreground",children:s.brand})]})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"px-2 py-1 bg-muted rounded-md text-xs font-medium",children:s.category||"Uncategorized"})}),e.jsx("td",{className:"px-4 py-3 text-foreground",children:s.price?`$${parseFloat(s.price).toFixed(2)}`:"-"}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"text-sm text-foreground",children:s.seller_name||"-"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:s.seller_email||""})]}),e.jsx("td",{className:"px-4 py-3 text-muted-foreground",children:s.view_count||0}),e.jsx("td",{className:"px-4 py-3",children:s.published?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium",children:[e.jsx(t,{name:"CheckCircle",size:12}),"Published"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-amber-100 text-amber-700 rounded-full text-xs font-medium",children:[e.jsx(t,{name:"FileEdit",size:12}),"Draft"]})})]},s.id))})]})}),e.jsxs("div",{className:"px-4 py-3 border-t border-border bg-muted/30 text-sm text-muted-foreground",children:["Showing ",u.length," of ",h," products"]})]})]})};export{A as default};
