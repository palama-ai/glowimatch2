import{r as c,j as e,a as n,d as z,c as _,L as C,e as j}from"./index-_ibJpO5e.js";const I=({activePage:o})=>{var h;const g=z(),{signOut:f,userProfile:t}=_(),d=[{id:"dashboard",label:"Overview",icon:"LayoutDashboard",path:"/seller"},{id:"products",label:"Products",icon:"Package",path:"/seller/products"},{id:"news",label:"News",icon:"Bell",path:"/seller/news"},{id:"profile",label:"Settings",icon:"Settings",path:"/seller/profile"}],x=async()=>{await f(),g("/login")};return e.jsxs("aside",{className:"w-72 min-h-screen bg-gradient-to-b from-slate-900 to-slate-950 flex flex-col",children:[e.jsx("div",{className:"p-8",children:e.jsxs(C,{to:"/seller",className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-rose-500 via-pink-500 to-fuchsia-500 flex items-center justify-center shadow-lg shadow-pink-500/25",children:e.jsx(n,{name:"Sparkles",size:24,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-xl text-white tracking-tight",children:"Glowimatch"}),e.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"Seller Dashboard"})]})]})}),e.jsxs("nav",{className:"flex-1 px-4 py-6",children:[e.jsx("p",{className:"px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider mb-4",children:"Menu"}),e.jsx("div",{className:"space-y-1",children:d.map(r=>e.jsxs(C,{to:r.path,className:`group flex items-center gap-4 px-4 py-3.5 rounded-xl transition-all duration-200 ${o===r.id?"bg-gradient-to-r from-pink-500/20 to-fuchsia-500/10 text-white border-l-2 border-pink-500":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:[e.jsx(n,{name:r.icon,size:20,className:o===r.id?"text-pink-400":"text-slate-500 group-hover:text-pink-400 transition-colors"}),e.jsx("span",{className:"font-medium",children:r.label}),o===r.id&&e.jsx("div",{className:"ml-auto w-1.5 h-1.5 rounded-full bg-pink-500"})]},r.id))})]}),e.jsxs("div",{className:"p-4 border-t border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-xl bg-slate-800/50 mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-pink-500 to-fuchsia-500 flex items-center justify-center text-white font-bold text-sm",children:(((h=t==null?void 0:t.full_name)==null?void 0:h[0])||"S").toUpperCase()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-white truncate",children:(t==null?void 0:t.full_name)||"Seller"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Seller Account"})]})]}),e.jsxs("button",{onClick:x,className:"flex items-center gap-3 px-4 py-3 w-full rounded-xl text-slate-400 hover:text-red-400 hover:bg-red-500/10 transition-all",children:[e.jsx(n,{name:"LogOut",size:18}),e.jsx("span",{className:"font-medium text-sm",children:"Sign Out"})]})]})]})},$=({product:o,onClose:g,onSave:f})=>{const[t,d]=c.useState(o||{name:"",brand:"",description:"",price:"",original_price:"",image_url:"",category:"",purchase_url:"",published:0}),[x,h]=c.useState(!1),[r,u]=c.useState("url"),[m,b]=c.useState(null),[v,k]=c.useState(null),[s,l]=c.useState(""),N="https://backend-three-sigma-81.vercel.app/api",P=()=>{var i;return{Authorization:`Bearer ${(i=JSON.parse(localStorage.getItem("gm_auth")||"{}"))==null?void 0:i.token}`}},w=a=>{const i=a.target.files[0];if(i){if(!["image/jpeg","image/jpg","image/png","image/webp","image/gif"].includes(i.type)){l("Invalid file type. Only JPEG, PNG, WebP, and GIF are allowed.");return}if(i.size>5*1024*1024){l("File too large. Maximum size is 5MB.");return}l(""),b(i);const S=new FileReader;S.onloadend=()=>{k(S.result)},S.readAsDataURL(i)}},y=async()=>{if(!m)return null;const a=new FormData;a.append("image",m);try{const i=await fetch(`${N}/upload/image`,{method:"POST",headers:P(),body:a}),p=await i.json();if(i.ok&&p.success)return p.data.url;throw new Error(p.error||"Failed to upload image")}catch(i){return console.error("Image upload error:",i),l(i.message||"Failed to upload image"),null}},E=async a=>{a.preventDefault(),h(!0),l("");let i=t.image_url;if(r==="upload"&&m){const p=await y();if(!p){h(!1);return}i=p}await f({...t,image_url:i}),h(!1)};return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-3xl w-full max-w-lg max-h-[90vh] overflow-y-auto shadow-2xl",children:[e.jsxs("div",{className:"p-6 border-b border-slate-200 dark:border-slate-800 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:o!=null&&o.id?"Edit Product":"New Product"}),e.jsx("p",{className:"text-sm text-slate-500 mt-0.5",children:"Fill in the product details"})]}),e.jsx("button",{onClick:g,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-xl transition-colors",children:e.jsx(n,{name:"X",size:20,className:"text-slate-500"})})]}),e.jsxs("form",{onSubmit:E,className:"p-6 space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-900 dark:text-white mb-2",children:"Product Name *"}),e.jsx(j,{value:t.name,onChange:a=>d({...t,name:a.target.value}),placeholder:"e.g. Vitamin C Serum",required:!0,className:"rounded-xl"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-900 dark:text-white mb-2",children:"Brand"}),e.jsx(j,{value:t.brand,onChange:a=>d({...t,brand:a.target.value}),placeholder:"Your brand",className:"rounded-xl"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-900 dark:text-white mb-2",children:"Category"}),e.jsxs("select",{value:t.category,onChange:a=>d({...t,category:a.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 dark:border-slate-700 rounded-xl bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-pink-500/50",children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"cleanser",children:"Cleanser"}),e.jsx("option",{value:"toner",children:"Toner"}),e.jsx("option",{value:"serum",children:"Serum"}),e.jsx("option",{value:"moisturizer",children:"Moisturizer"}),e.jsx("option",{value:"sunscreen",children:"Sunscreen"}),e.jsx("option",{value:"mask",children:"Mask"}),e.jsx("option",{value:"treatment",children:"Treatment"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-900 dark:text-white mb-2",children:"Description"}),e.jsx("textarea",{value:t.description,onChange:a=>d({...t,description:a.target.value}),placeholder:"Describe your product...",className:"w-full px-4 py-3 border border-slate-200 dark:border-slate-700 rounded-xl bg-white dark:bg-slate-800 text-slate-900 dark:text-white min-h-[100px] focus:outline-none focus:ring-2 focus:ring-pink-500/50"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-900 dark:text-white mb-2",children:"Price ($)"}),e.jsx(j,{type:"number",step:"0.01",value:t.price,onChange:a=>d({...t,price:a.target.value}),placeholder:"29.99",className:"rounded-xl"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-900 dark:text-white mb-2",children:"Original Price"}),e.jsx(j,{type:"number",step:"0.01",value:t.original_price,onChange:a=>d({...t,original_price:a.target.value}),placeholder:"39.99",className:"rounded-xl"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-900 dark:text-white mb-2",children:"Product Image"}),e.jsxs("div",{className:"flex mb-3 p-1 bg-slate-100 dark:bg-slate-800 rounded-xl",children:[e.jsxs("button",{type:"button",onClick:()=>u("url"),className:`flex-1 flex items-center justify-center gap-2 py-2 px-3 rounded-lg text-sm font-medium transition-all ${r==="url"?"bg-white dark:bg-slate-700 text-slate-900 dark:text-white shadow-sm":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[e.jsx(n,{name:"Link",size:16}),"URL"]}),e.jsxs("button",{type:"button",onClick:()=>u("upload"),className:`flex-1 flex items-center justify-center gap-2 py-2 px-3 rounded-lg text-sm font-medium transition-all ${r==="upload"?"bg-white dark:bg-slate-700 text-slate-900 dark:text-white shadow-sm":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[e.jsx(n,{name:"Upload",size:16}),"Upload"]})]}),r==="url"&&e.jsx(j,{value:t.image_url,onChange:a=>d({...t,image_url:a.target.value}),placeholder:"https://example.com/image.jpg",className:"rounded-xl"}),r==="upload"&&e.jsxs("div",{children:[e.jsxs("div",{className:"relative border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-xl p-6 text-center hover:border-pink-400 transition-colors cursor-pointer",onClick:()=>document.getElementById("image-upload").click(),children:[e.jsx("input",{type:"file",id:"image-upload",accept:"image/jpeg,image/jpg,image/png,image/webp,image/gif",onChange:w,className:"hidden"}),v?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:v,alt:"Preview",className:"max-h-40 mx-auto rounded-lg object-cover"}),e.jsx("button",{type:"button",onClick:a=>{a.stopPropagation(),b(null),k(null)},className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600",children:e.jsx(n,{name:"X",size:14})}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:m==null?void 0:m.name})]}):e.jsxs("div",{children:[e.jsx(n,{name:"ImagePlus",size:40,className:"mx-auto text-slate-400 mb-2"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Click to select an image"}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"JPEG, PNG, WebP, GIF (max 5MB)"})]})]}),s&&e.jsxs("p",{className:"text-sm text-red-500 mt-2 flex items-center gap-1",children:[e.jsx(n,{name:"AlertCircle",size:14}),s]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-900 dark:text-white mb-2",children:"Purchase URL"}),e.jsx(j,{value:t.purchase_url,onChange:a=>d({...t,purchase_url:a.target.value}),placeholder:"https://yourstore.com/product",className:"rounded-xl"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-slate-50 dark:bg-slate-800/50 rounded-xl",children:[e.jsx("input",{type:"checkbox",id:"published",checked:t.published===1,onChange:a=>d({...t,published:a.target.checked?1:0}),className:"w-5 h-5 accent-pink-500 rounded"}),e.jsx("label",{htmlFor:"published",className:"text-sm font-medium text-slate-900 dark:text-white",children:"Publish product (visible to users)"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:g,className:"flex-1 px-4 py-3 border border-slate-200 dark:border-slate-700 rounded-xl text-slate-700 dark:text-slate-300 font-semibold hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:x,className:"flex-1 px-4 py-3 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-xl font-semibold shadow-lg shadow-pink-500/25 hover:shadow-xl hover:shadow-pink-500/30 disabled:opacity-50 transition-all",children:x?"Saving...":o!=null&&o.id?"Update":"Create"})]})]})]})})},F=()=>{const[o,g]=c.useState([]),[f,t]=c.useState(!0),[d,x]=c.useState(!1),[h,r]=c.useState(null),u="https://backend-three-sigma-81.vercel.app/api",m=()=>{var l;return{Authorization:`Bearer ${(l=JSON.parse(localStorage.getItem("gm_auth")||"{}"))==null?void 0:l.token}`,"Content-Type":"application/json"}};c.useEffect(()=>{b()},[]);const b=async()=>{try{const s=await fetch(`${u}/seller/products`,{headers:m()});if(s.ok){const l=await s.json();g(l.data||[])}}catch(s){console.error("Error fetching products:",s)}finally{t(!1)}},v=async s=>{try{const l=!!s.id,N=l?`${u}/seller/products/${s.id}`:`${u}/seller/products`,w=await fetch(N,{method:l?"PUT":"POST",headers:m(),body:JSON.stringify(s)}),y=await w.json();w.ok?(await b(),x(!1),r(null)):alert(`Error: ${y.error||"Failed to save product"}`)}catch(l){console.error("Error saving product:",l),alert(`Error: ${l.message||"Network error"}`)}},k=async s=>{if(confirm("Are you sure you want to delete this product?"))try{(await fetch(`${u}/seller/products/${s}`,{method:"DELETE",headers:m()})).ok&&b()}catch(l){console.error("Error deleting product:",l)}};return e.jsxs("div",{className:"flex min-h-screen bg-slate-50 dark:bg-slate-950",children:[e.jsx(I,{activePage:"products"}),e.jsxs("main",{className:"flex-1 p-8 lg:p-10",children:[e.jsx("header",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Products"}),e.jsx("p",{className:"text-slate-500 mt-1",children:"Manage your product catalog"})]}),e.jsxs("button",{onClick:()=>{r(null),x(!0)},className:"flex items-center gap-2 px-5 py-3 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-xl font-semibold shadow-lg shadow-pink-500/25 hover:shadow-xl hover:shadow-pink-500/30 hover:-translate-y-0.5 transition-all duration-200",children:[e.jsx(n,{name:"Plus",size:18}),"Add Product"]})]})}),f?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5",children:[1,2,3].map(s=>e.jsx("div",{className:"aspect-[4/5] bg-slate-200 dark:bg-slate-800 rounded-2xl animate-pulse"},s))}):o.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5",children:o.map(s=>e.jsxs("div",{className:"group bg-white dark:bg-slate-900 border border-slate-100 dark:border-slate-800 rounded-2xl overflow-hidden hover:shadow-xl hover:shadow-pink-500/10 transition-all duration-300",children:[e.jsxs("div",{className:"h-48 bg-slate-100 dark:bg-slate-800 relative overflow-hidden",children:[s.image_url?e.jsx("img",{src:s.image_url,alt:s.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(n,{name:"Image",size:40,className:"text-slate-300 dark:text-slate-600"})}),e.jsx("div",{className:`absolute top-3 right-3 px-2.5 py-1 rounded-full text-xs font-semibold ${s.published?"bg-emerald-500/90 text-white":"bg-amber-500/90 text-white"}`,children:s.published?"Live":"Draft"})]}),e.jsxs("div",{className:"p-5",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white mb-1",children:s.name}),e.jsx("p",{className:"text-sm text-slate-500 mb-3",children:s.brand||"No brand"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xl font-bold text-slate-900 dark:text-white",children:["$",s.price||"0.00"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>{r(s),x(!0)},className:"p-2.5 text-slate-400 hover:text-pink-500 hover:bg-pink-50 dark:hover:bg-pink-500/10 rounded-xl transition-colors",children:e.jsx(n,{name:"Edit",size:18})}),e.jsx("button",{onClick:()=>k(s.id),className:"p-2.5 text-slate-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-500/10 rounded-xl transition-colors",children:e.jsx(n,{name:"Trash2",size:18})})]})]})]})]},s.id))}):e.jsxs("div",{className:"text-center py-20 bg-white dark:bg-slate-900 border border-slate-100 dark:border-slate-800 rounded-3xl",children:[e.jsx("div",{className:"w-20 h-20 rounded-3xl bg-gradient-to-br from-pink-100 to-rose-100 dark:from-pink-500/10 dark:to-rose-500/10 flex items-center justify-center mx-auto mb-5",children:e.jsx(n,{name:"Package",size:36,className:"text-pink-500"})}),e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2",children:"No products yet"}),e.jsx("p",{className:"text-slate-500 mb-6 max-w-sm mx-auto",children:"Start by adding your first product to showcase on Glowimatch"}),e.jsxs("button",{onClick:()=>x(!0),className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-xl font-semibold shadow-lg shadow-pink-500/25",children:[e.jsx(n,{name:"Plus",size:18}),"Add Product"]})]}),d&&e.jsx($,{product:h,onClose:()=>{x(!1),r(null)},onSave:v})]})]})};export{F as default};
